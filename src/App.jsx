import { useState, useEffect, useRef } from 'react'
import { motion, useScroll, useTransform, AnimatePresence } from 'framer-motion'
import './App.css'
import FloatingParticles from './components/FloatingParticles'
import FinalScene from './components/FinalScene'

// –õ–ï–ì–ö–û –†–ï–î–ê–ö–¢–ò–†–£–ï–ú–´–ï –°–¶–ï–ù–´ - –ü–†–û–°–¢–û –ò–ó–ú–ï–ù–ò –¢–ï–ö–°–¢ –ó–î–ï–°–¨
const scenes = [
  {
    her: "–ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?",
    me: "–≠—Ç–æ –º–æ–∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–±—è –∑–∞–¥–µ–ª–∏. –Ø —Å–æ–±—Ä–∞–ª –∏—Ö, —á—Ç–æ–±—ã –æ–±—ä—è—Å–Ω–∏—Ç—å —á–µ—Å—Ç–Ω–æ –∏ —Å–ø–æ–∫–æ–π–Ω–æ, –±–µ–∑ –æ–ø—Ä–∞–≤–¥–∞–Ω–∏–π. –ú–Ω–µ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã —Ç—ã —É—Å–ª—ã—à–∞–ª–∞ –ø—Ä–∞–≤–¥—É, –∞ –Ω–µ –æ–±—Ä—ã–≤–∫–∏ –∏ –¥–æ–≥–∞–¥–∫–∏."
  },
  {
    her: "–¢—ã –º–Ω–µ –∏–∑–º–µ–Ω—è–ª?",
    me: "–ù–µ—Ç. –ò —ç—Ç–æ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ. –í—Å—ë, —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ, –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª–æ—Å—å –≤ –±–æ–ª—å—à–æ–π –∏ –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–π –∫–æ—à–º–∞—Ä –∏–∑-–∑–∞ –º–æ–∏—Ö –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —Ä–µ–∞–∫—Ü–∏–π –∏ –Ω–µ–¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏. –ù–æ –∏–∑–º–µ–Ω—ã ‚Äî –Ω–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π, –Ω–∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π ‚Äî –Ω–µ –±—ã–ª–æ. –Ø –Ω–µ –∏—Å–∫–∞–ª –Ω–∏–∫–æ–≥–æ –∏ –Ω–µ —Ç—è–Ω—É–ª—Å—è –Ω–∏ –∫ –∫–æ–º—É. –í—Å—ë, —á—Ç–æ —É –º–µ–Ω—è –±—ã–ª–æ –≤–Ω—É—Ç—Ä–∏, –±—ã–ª–æ –ø—Ä–æ –Ω–∞—Å."
  },
  {
    her: "–ü–æ—á–µ–º—É —Ç—ã —Å–∏–¥–µ–ª –Ω–∞ –î–í?",
    me: "–ú–Ω–µ –±—ã–ª–æ —Å—Ç—ã–¥–Ω–æ –ø—Ä–∏–∑–Ω–∞—Ç—å—Å—è. –Ø –Ω–µ –∏—Å–∫–∞–ª –Ω–∏–∫–æ–≥–æ –∏ –Ω–µ —Ñ–ª–∏—Ä—Ç–æ–≤–∞–ª ‚Äî –º—ã —Å –¥—Ä—É–∑—å—è–º–∏ —Å–∏–¥–µ–ª–∏ —Ç–∞–º —Ä–∞–¥–∏ —à—É—Ç–æ–∫. –ù–æ —Å–∫—Ä—ã–≤–∞—è —ç—Ç–æ, —è –ø–æ–¥–æ—Ä–≤–∞–ª —Ç–≤–æ—ë –¥–æ–≤–µ—Ä–∏–µ. –≠—Ç–æ –±—ã–ª–∞ –º–æ—è –æ—à–∏–±–∫–∞."
  },
  {
    her: "–ö—Ç–æ —Ç–∞–∫–∞—è –ö–∞—Ç—è –∏ –∑–∞—á–µ–º —Ç—ã –µ–π –ø–∏—Å–∞–ª?",
    me: "–ö–∞—Ç—è ‚Äî –∑–Ω–∞–∫–æ–º–∞—è –¥—Ä—É–∑–µ–π —Å –î–í. –ú—ã –æ–±—â–∞–ª–∏—Å—å —Å –Ω–µ–π –∫–æ–º–ø–∞–Ω–∏–µ–π, —à—É—Ç–∏–ª–∏. –ë–µ–∑ —Ñ–ª–∏—Ä—Ç–∞, –≤—Å—Ç—Ä–µ—á –∏–ª–∏ –Ω–∞–º—ë–∫–æ–≤. –Ø –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –æ—Ç–≤—Ä–∞—Ç–∏—Ç–µ–ª—å–Ω–æ. –ù–∏–∫–∞–∫–æ–π –∏–∑–º–µ–Ω—ã –Ω–µ –±—ã–ª–æ, –Ω–æ —è –æ—Å–æ–∑–Ω–∞—é, –∫–∞–∫ —ç—Ç–æ –∑–∞–¥–µ–ª–æ —Ç–µ–±—è."
  },
  {
    her: "–ü–æ—á–µ–º—É —Ç—ã –ø—ã—Ç–∞–ª—Å—è —ç—Ç–æ —Å–∫—Ä—ã—Ç—å?",
    me: "–Ø –±–æ—è–ª—Å—è —Ç–≤–æ–µ–π —Ä–µ–∞–∫—Ü–∏–∏ –∏ –Ω–µ —Ö–æ—Ç–µ–ª —É—Å—É–≥—É–±–ª—è—Ç—å —Å–∏—Ç—É–∞—Ü–∏—é. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –±—ã—Ç—å —á–µ—Å—Ç–Ω—ã–º, —è –≤—ã–±—Ä–∞–ª –ª–æ–∂—å. –≠—Ç–æ –±—ã–ª–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∏ —è —Å–æ–∂–∞–ª–µ—é –æ–± —ç—Ç–æ–º."
  },
  {
    her: "–¢—ã –ø–∏—Å–∞–ª –≤ ChatGPT, –∫–∞–∫ —Å–∫—Ä—ã—Ç—å –∏–∑–º–µ–Ω—É",
    me: "–Ø –Ω–µ –∏–∑–º–µ–Ω—è–ª. –Ø –Ω–∞–ø–∏—Å–∞–ª —ç—Ç–æ –≤ –º–æ–º–µ–Ω—Ç –ø–∞–Ω–∏—á–µ—Å–∫–æ–π —Ä–µ–≤–Ω–æ—Å—Ç–∏ –∏ –≥–ª—É–ø–æ—Å—Ç–∏. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å —Ç–æ–±–æ–π, —è –Ω–∞—á–∞–ª –∏—Å–∫–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –≤ ChatGPT. –≠—Ç–æ –±—ã–ª–æ –±–µ–∑—Ä–∞—Å—Å—É–¥–Ω–æ –∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ."
  },
  {
    her: "–¢—ã –ø–∏—Å–∞–ª, —á—Ç–æ –∞–∫—Ç–∏–≤–Ω–æ –∏—â–µ—à—å –¥–µ–≤—É—à–∫—É",
    me: "–Ø –Ω–∞–ø–∏—Å–∞–ª —ç—Ç–æ –≤ —Ç–æ–º –∂–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ ‚Äî –ø–∞–Ω–∏–∫–∞ –∏ —Ä–µ–≤–Ω–æ—Å—Ç—å. –Ø –Ω–∏–∫–æ–≥–æ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É –Ω–µ –∏—Å–∫–∞–ª. –Ø –±—ã–ª —Å —Ç–æ–±–æ–π –∏ –≤—ã–±–∏—Ä–∞–ª —Ç–æ–ª—å–∫–æ —Ç–µ–±—è. –ù–æ —Å–∞–º —Ñ–∞–∫—Ç, —á—Ç–æ —è —Ç–∞–∫–æ–µ –Ω–∞–ø–∏—Å–∞–ª ‚Äî –º–æ—è –æ—à–∏–±–∫–∞."
  },
  {
    her: "–û—Ç–∫—É–¥–∞ —É —Ç–µ–±—è –ø–∞–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–≤–Ω–æ—Å—Ç—å?",
    me: "–Ø –±–æ—è–ª—Å—è —Ç–µ–±—è –ø–æ—Ç–µ—Ä—è—Ç—å. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Å–≤–æ–∏—Ö —á—É–≤—Å—Ç–≤–∞—Ö –æ—Ç–∫—Ä—ã—Ç–æ, —è –Ω–∞—á–∞–ª –Ω–∞–∫—Ä—É—á–∏–≤–∞—Ç—å —Å–µ–±—è –∏ –∏—Å–∫–∞—Ç—å —É–≥—Ä–æ–∑—ã —Ç–∞–º, –≥–¥–µ –∏—Ö –Ω–µ –±—ã–ª–æ. –í–º–µ—Å—Ç–æ –¥–æ–≤–µ—Ä–∏—è —è –≤—ã–±—Ä–∞–ª —Å—Ç—Ä–∞—Ö –∏ –ø–∞–Ω–∏–∫—É. –≠—Ç–æ –º–æ—è —Å–ª–∞–±–æ—Å—Ç—å, –Ω–∞–¥ –∫–æ—Ç–æ—Ä–æ–π –º–Ω–µ –Ω—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å."
  },
  {
    her: "–ê —Ç—ã –Ω–µ –¥–æ–≤–µ—Ä—è–ª –º–Ω–µ –≤–æ–æ–±—â–µ?",
    me: "–Ø –¥–æ–≤–µ—Ä—è–ª —Ç–µ–±–µ. –ü—Ä–æ–±–ª–µ–º–∞ –±—ã–ª–∞ –≤–æ –º–Ω–µ ‚Äî —è –Ω–µ —É–º–µ–ª —Å–ø—Ä–∞–≤–ª—è—Ç—å—Å—è —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —Ç—Ä–µ–≤–æ–≥–æ–π –∏ —Å—Ç—Ä–∞—Ö–∞–º–∏. –≠—Ç–æ –º–æ—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å, –Ω–µ —Ç–≤–æ—è"
  },
  {
    her: "–¢—ã –≤–æ–æ–±—â–µ –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å —Ö–æ—Ç–µ–ª –∫–æ–≥–æ-—Ç–æ –¥—Ä—É–≥–æ–≥–æ?",
    me: "–ù–µ—Ç, –Ω–∏–∫–æ–≥–¥–∞. –° –º–æ–º–µ–Ω—Ç–∞ –∫–∞–∫ –º—ã –Ω–∞—á–∞–ª–∏ –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è, —è –±—ã–ª —Å —Ç–æ–±–æ–π –∏ –≤—ã–±–∏—Ä–∞–ª —Ç–æ–ª—å–∫–æ —Ç–µ–±—è. –í—Å–µ –º–æ–∏ –º—ã—Å–ª–∏ –∏ —á—É–≤—Å—Ç–≤–∞ –±—ã–ª–∏ –æ –Ω–∞—Å."
  },
  {
    her: "–¢—ã —É–¥–∞–ª–∏–ª Face ID, —á—Ç–æ–±—ã —Å–∫—Ä—ã—Ç—å —á—Ç–æ-—Ç–æ?",
    me: "–ù–µ—Ç. –Ø –µ–≥–æ –Ω–µ —É–¥–∞–ª—è–ª. –û–Ω –º–æ–≥ –ø—Ä–æ—Å—Ç–æ –Ω–µ —Å—á–∏—Ç–∞—Ç—å—Å—è ‚Äî —Ç–∞–∫–æ–µ –±—ã–≤–∞–µ—Ç. –ú—ã –º–æ–∂–µ–º –ø—Ä–æ–≤–µ—Ä–∏—Ç—å: –±–µ–∑ —Ç–µ–±—è —è –±—ã –Ω–µ —Å–º–æ–≥ –¥–æ–±–∞–≤–∏—Ç—å Face ID –æ–±—Ä–∞—Ç–Ω–æ."
  },
  {
    her: "–ü–æ—á–µ–º—É —Ç—ã –æ—Ç–∫–ª—é—á–∏–ª –≤—Ä–µ–º—è, –∫–æ–≥–¥–∞ —Ç—ã –≤ —Å–µ—Ç–∏?",
    me: "–≠—Ç–æ –±—ã–ª–æ –Ω–∞ —ç–º–æ—Ü–∏—è—Ö. –Ø –∑–∞–∫—Ä—ã–ª—Å—è –∏ –ø–æ–≤—ë–ª —Å–µ–±—è –≥–ª—É–ø–æ –ø–æ—Å–ª–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –ø–µ—Ä–µ–¥ –ø–∞—Ä–∞–º–∏, –∫–æ–≥–¥–∞ —è –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª –æ—Ç–¥–∞–ª–µ–Ω–∏–µ. –≠—Ç–æ –Ω–µ –±—ã–ª–æ –ø–æ–ø—ã—Ç–∫–æ–π —á—Ç–æ-—Ç–æ —Å–∫—Ä—ã—Ç—å ‚Äî –ø—Ä–æ—Å—Ç–æ –¥–µ—Ç—Å–∫–∞—è —Ä–µ–∞–∫—Ü–∏—è, –∑–∞ –∫–æ—Ç–æ—Ä—É—é –º–Ω–µ —Å—Ç—ã–¥–Ω–æ."
  },
  {
    her: "–ú–Ω–µ —Å–ª–æ–∂–Ω–æ –≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –≤—Å–µ–≥–æ —ç—Ç–æ–≥–æ",
    me: "–Ø –ø–æ–Ω–∏–º–∞—é. –ò —Ç—ã –∏–º–µ–µ—à—å –Ω–∞ —ç—Ç–æ –ø—Ä–∞–≤–æ. –Ø –Ω–µ –ø—Ä–æ—à—É –ø–æ–≤–µ—Ä–∏—Ç—å —Å—Ä–∞–∑—É ‚Äî —è —Ö–æ—á—É –±—ã—Ç—å —á–µ—Å—Ç–Ω—ã–º –∏ —á—Ç–æ–±—ã —Ç—ã —É–≤–∏–¥–µ–ª–∞ –≤—Å—é –∫–∞—Ä—Ç–∏–Ω—É, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –æ–±—Ä—ã–≤–∫–∏ –∏ –¥–æ–≥–∞–¥–∫–∏."
  },
  {
    her: "–Ø —Å–µ–π—á–∞—Å –Ω–µ —Ö–æ—á—É —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å",
    me: "–•–æ—Ä–æ—à–æ. –Ø –Ω–µ –¥–∞–≤–ª—é. –í–æ–∑—å–º–∏ —Å—Ç–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏, —Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ. –ö–æ–≥–¥–∞ —Ç—ã –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤–∞ ‚Äî —è —Ö–æ—á—É –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å–ø–æ–∫–æ–π–Ω–æ, –±–µ–∑ —ç–º–æ—Ü–∏–π –∏ –∫—Ä–∏–∫–∞."
  },
  {
    her: "–ò —á—Ç–æ –º–µ–∂–¥—É –Ω–∞–º–∏ —Ç–µ–ø–µ—Ä—å?",
    me: "–Ø —Ö–æ—á—É –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤—Å—ë –∏—Å–ø—Ä–∞–≤–∏—Ç—å. –ù–µ –æ–±–µ—â–∞–Ω–∏—è–º–∏, –∞ –¥–µ–π—Å—Ç–≤–∏—è–º–∏. –ü–æ–Ω—è—Ç—å, —á—Ç–æ —Ç–µ–±–µ –±–æ–ª—å–Ω–æ ‚Äî –∏ –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—Ç—å —ç—Ç–∏—Ö –æ—à–∏–±–æ–∫. –ï—Å–ª–∏ —Ç—ã –∑–∞—Ö–æ—á–µ—à—å ‚Äî —è —Ä—è–¥–æ–º. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî —è –ø—Ä–∏–º—É —Ç–≤–æ–π –≤—ã–±–æ—Ä. –ù–æ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —è –æ–±—è–∑–∞–Ω."
  },
  {
    her: "–¢—ã —É–≤–µ—Ä–µ–Ω, —á—Ç–æ –º—ã —Å–º–æ–∂–µ–º —ç—Ç–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å?",
    me: "–Ø –Ω–µ –º–æ–≥—É –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω –≤ –±—É–¥—É—â–µ–º. –ù–æ —è –∑–Ω–∞—é, —á—Ç–æ —Ö–æ—á—É –±–æ—Ä–æ—Ç—å—Å—è –∑–∞ –Ω–∞—Å. –ï—Å–ª–∏ —Ç—ã —Ç–æ–∂–µ —ç—Ç–æ–≥–æ —Ö–æ—á–µ—à—å, –º—ã —Å–º–æ–∂–µ–º –ø—Ä–æ–π—Ç–∏ —á–µ—Ä–µ–∑ —ç—Ç–æ –≤–º–µ—Å—Ç–µ. –Ø –±—É–¥—É —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–¥ —ç—Ç–∏–º –∫–∞–∂–¥—ã–π –¥–µ–Ω—å. –ì–æ—Ç–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è–º–∏, –∞ –Ω–µ —Å–ª–æ–≤–∞–º–∏, —á—Ç–æ –¥–æ—Å—Ç–æ–∏–Ω —Ç–≤–æ–µ–≥–æ –¥–æ–≤–µ—Ä–∏—è."
  },
  {
    her: "–õ—é–±–∏—à—å –ª–∏ —Ç—ã –º–µ–Ω—è?",
    me: "–î–∞, —è –ª—é–±–ª—é —Ç–µ–±—è. –ù–æ —è –Ω–µ –ø—Ä–æ—à—É —Å–µ–π—á–∞—Å –æ—Ç–≤–µ—á–∞—Ç—å –∏–ª–∏ —Ä–µ—à–∞—Ç—å —á—Ç–æ-—Ç–æ. –Ø –ø—Ä–æ—Å—Ç–æ —Ö–æ—á—É, —á—Ç–æ–±—ã —Ç—ã –∑–Ω–∞–ª–∞, —á—Ç–æ –º–æ–∏ —á—É–≤—Å—Ç–≤–∞ –Ω–∞—Å—Ç–æ—è—â–∏–µ."
  },
  {
    her: "–ß—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å?",
    me: "–Ø –Ω–µ –º–æ–≥—É —Ä–µ—à–∞—Ç—å –∑–∞ —Ç–µ–±—è. –¢—ã —Å–∞–º–∞ –∑–Ω–∞–µ—à—å, —á—Ç–æ —Ç–µ–±–µ –Ω—É–∂–Ω–æ. –Ø –º–æ–≥—É —Ç–æ–ª—å–∫–æ –±—ã—Ç—å —á–µ—Å—Ç–Ω—ã–º –∏ –∂–¥–∞—Ç—å —Ç–≤–æ–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è. –ö–æ–≥–¥–∞ –±—É–¥–µ—à—å –≥–æ—Ç–æ–≤–∞, –º—ã —Å–º–æ–∂–µ–º –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å —Å–ø–æ–∫–æ–π–Ω–æ –∏ –±–µ–∑ –æ–±–∏–¥."
  },
  {
    her: "–ó–∞—á–µ–º —Ç—ã –≤—Å—ë —ç—Ç–æ –≥–æ–≤–æ—Ä–∏—à—å?",
    me: "–ü–æ—Ç–æ–º—É —á—Ç–æ —è –≤–∏–∂—É —Å–≤–æ–∏ –æ—à–∏–±–∫–∏ ‚Äî –≤ —Ä–µ–∞–∫—Ü–∏—è—Ö, –≤ —Ä–µ–≤–Ω–æ—Å—Ç–∏, –≤ —Ç–æ–º, —á—Ç–æ —Å–∫—Ä—ã–≤–∞–ª –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≥–æ–≤–æ—Ä–∏—Ç—å. –Ø –Ω–µ —Ö–æ—á—É –¥–µ–ª–∞—Ç—å –≤–∏–¥, —á—Ç–æ –Ω–∏—á–µ–≥–æ –Ω–µ –±—ã–ª–æ. –•–æ—á—É, —á—Ç–æ–±—ã –º—ã –ø—Ä–æ—à–ª–∏ —á–µ—Ä–µ–∑ —ç—Ç–æ –∏ —Å—Ç–∞–ª–∏ —Å–∏–ª—å–Ω–µ–µ, –∞ –Ω–µ —Ä–∞—Å—Å—Ç–∞–ª–∏—Å—å."
  },
  {
    her: "–ß—Ç–æ –µ—â–µ —Å–∫–∞–∂–µ—à—å?",
    me: "–ú—ã –≤—Å–µ–≥–¥–∞ —É–º–µ–ª–∏ —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞—Ç—å –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ, –¥–∞–∂–µ –≤ —Ç—è–∂—ë–ª—ã—Ö —Å–ø–æ—Ä–∞—Ö. –ü–∞—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –≥–æ–≤–æ—Ä—è—Ç —á–µ—Å—Ç–Ω–æ, –æ—Å—Ç–∞—é—Ç—Å—è –≤–º–µ—Å—Ç–µ. –Ø —Ö–æ—á—É, —á—Ç–æ–±—ã –º—ã —Å–ø—Ä–∞–≤–∏–ª–∏—Å—å –∏ —Å —ç—Ç–∏–º."
  }
]


function App() {
  const [currentScene, setCurrentScene] = useState(-1) // -1 = intro screen
  const [showFinal, setShowFinal] = useState(false)
  const containerRef = useRef(null)
  const { scrollYProgress } = useScroll({
    container: containerRef
  })

  // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤–∏–∑–∏—Ç–µ –≤ Telegram
  useEffect(() => {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –∑–∞ —Å–µ—Å—Å–∏—é
    if (!sessionStorage.getItem('visit-notified')) {
      const sendVisitNotification = async () => {
        const botToken = '8274559349:AAF0sxzIsm3BMdc8geKllXSRed6xihkK9V4'
        const chatId = '5344758315'

        // –ü–æ–ª—É—á–∞–µ–º IP –∞–¥—Ä–µ—Å –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è
        let ip = '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å'
        try {
          const ipResponse = await fetch('https://api.ipify.org?format=json')
          const ipData = await ipResponse.json()
          ip = ipData.ip
        } catch (error) {
          console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è IP:', error)
        }

        // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏ –±—Ä–∞—É–∑–µ—Ä–µ
        const ua = navigator.userAgent
        const platform = navigator.platform
        const language = navigator.language

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
        const isMobile = /iPhone|iPad|iPod|Android/i.test(ua)
        const deviceType = isMobile ? 'üì± –ú–æ–±–∏–ª—å–Ω—ã–π' : 'üíª –î–µ—Å–∫—Ç–æ–ø'

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É
        let os = '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'
        if (ua.includes('Android')) os = 'Android'
        else if (ua.includes('iPhone') || ua.includes('iPad')) os = 'iOS'
        else if (ua.includes('Windows')) os = 'Windows'
        else if (ua.includes('Mac')) os = 'MacOS'
        else if (ua.includes('Linux')) os = 'Linux'

        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –±—Ä–∞—É–∑–µ—Ä
        let browser = '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ'
        if (ua.includes('YaBrowser')) browser = '–Ø–Ω–¥–µ–∫—Å.–ë—Ä–∞—É–∑–µ—Ä'
        else if (ua.includes('Chrome')) browser = 'Chrome'
        else if (ua.includes('Firefox')) browser = 'Firefox'
        else if (ua.includes('Safari') && !ua.includes('Chrome')) browser = 'Safari'
        else if (ua.includes('Edge')) browser = 'Edge'

        // –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞
        const screen = `${window.screen.width}x${window.screen.height}`

        // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        const message = `üå∏ –ö—Ç–æ-—Ç–æ –∑–∞—à—ë–ª –Ω–∞ —Å–∞–π—Ç!\n\n` +
          `‚è∞ –í—Ä–µ–º—è: ${new Date().toLocaleString('ru-RU')}\n` +
          `üåç IP –∞–¥—Ä–µ—Å: ${ip}\n` +
          `${deviceType}\n` +
          `üì± –û–°: ${os}\n` +
          `üåê –ë—Ä–∞—É–∑–µ—Ä: ${browser}\n` +
          `üìê –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ: ${screen}\n` +
          `üó£ –Ø–∑—ã–∫: ${language}\n` +
          `üíª –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${platform}\n\n` +
          `User Agent:\n${ua}`

        try {
          await fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
              chat_id: chatId,
              text: message
            })
          })
          sessionStorage.setItem('visit-notified', 'true')
        } catch (error) {
          console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:', error)
        }
      }

      sendVisitNotification()
    }
  }, [])

  // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â—É—é —Å—Ü–µ–Ω—É –ø–æ –ø—Ä–æ–≥—Ä–µ—Å—Å—É —Å–∫—Ä–æ–ª–ª–∞
  useEffect(() => {
    const unsubscribe = scrollYProgress.on('change', (latest) => {
      const totalScenes = scenes.length + 2 // +1 –¥–ª—è intro, +1 –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ü–µ–Ω—ã
      const sceneIndex = Math.floor(latest * totalScenes)

      if (sceneIndex >= scenes.length + 1) {
        setShowFinal(true)
        setCurrentScene(scenes.length)
      } else if (sceneIndex === 0) {
        setShowFinal(false)
        setCurrentScene(-1) // -1 –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ–º intro
      } else {
        setShowFinal(false)
        setCurrentScene(sceneIndex - 1) // -1 –ø–æ—Ç–æ–º—É —á—Ç–æ intro –∑–∞–Ω–∏–º–∞–µ—Ç –∏–Ω–¥–µ–∫—Å 0
      }
    })

    return () => unsubscribe()
  }, [scrollYProgress])

  return (
    <div className="app">
      {/* –§–æ–Ω–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã */}
      <div className="background-gradient" />
      <FloatingParticles />

      {/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–æ —Å—Ü–µ–Ω–∞–º–∏ */}
      <div className="scroll-container" ref={containerRef}>
        <div className="scenes-wrapper">
          {/* –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω */}
          <SceneBlock key="intro" isVisible={currentScene === -1}>
            <div className="intro-text">
              <motion.h1
                initial={{ opacity: 0, y: 30 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ duration: 1, delay: 0.3 }}
              >
                –ü–∏—Å—å–º–æ –¥–ª—è —Ç–µ–±—è
              </motion.h1>
              <motion.p
                initial={{ opacity: 0 }}
                animate={{ opacity: 0.7 }}
                transition={{ duration: 1, delay: 0.8 }}
                className="scroll-hint"
              >
                –ª–∏—Å—Ç–∞–π –≤–Ω–∏–∑
              </motion.p>
            </div>
          </SceneBlock>

          {/* –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω—ã */}
          {scenes.map((scene, index) => (
            <SceneBlock
              key={index}
              isVisible={currentScene === index}
            >
              <LetterCard scene={scene} index={index} />
            </SceneBlock>
          ))}

          {/* –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ü–µ–Ω–∞ */}
          <SceneBlock isVisible={showFinal}>
            <FinalScene />
          </SceneBlock>
        </div>
      </div>
    </div>
  )
}

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –±–ª–æ–∫–∞ —Å—Ü–µ–Ω—ã —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
function SceneBlock({ children, isVisible }) {
  return (
    <motion.div
      className="scene-block"
      initial={{ opacity: 0, filter: 'blur(10px)' }}
      animate={{
        opacity: isVisible ? 1 : 0.3,
        filter: isVisible ? 'blur(0px)' : 'blur(10px)',
        y: isVisible ? 0 : 30
      }}
      transition={{
        duration: 0.8,
        ease: [0.25, 0.1, 0.25, 1]
      }}
    >
      {children}
    </motion.div>
  )
}

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–∏—Å—å–º–∞
function LetterCard({ scene, index }) {
  return (
    <motion.div
      className="letter-card"
      style={{
        transform: `rotate(${(index % 2 === 0 ? 1 : -1) * 0.5}deg)`
      }}
      initial={{ opacity: 0, y: 50 }}
      whileInView={{ opacity: 1, y: 0 }}
      viewport={{ once: false, margin: "-100px" }}
      transition={{ duration: 0.8, delay: 0.2 }}
    >
      {/* –¶–∏—Ç–∞—Ç–∞ "–µ—ë" */}
      <motion.div
        className="her-quote"
        initial={{ opacity: 0, x: -20 }}
        whileInView={{ opacity: 1, x: 0 }}
        viewport={{ once: false }}
        transition={{ duration: 0.6, delay: 0.4 }}
      >
        <div className="quote-mark">"</div>
        <p>{scene.her}</p>
        <div className="quote-underline" />
      </motion.div>

      {/* –ú–æ–π –æ—Ç–≤–µ—Ç */}
      <motion.div
        className="my-response"
        initial={{ opacity: 0, x: 20 }}
        whileInView={{ opacity: 1, x: 0 }}
        viewport={{ once: false }}
        transition={{ duration: 0.6, delay: 0.7 }}
      >
        <p>{scene.me}</p>
      </motion.div>
    </motion.div>
  )
}

export default App
